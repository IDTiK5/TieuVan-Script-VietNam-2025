local P=game:GetService("Players")local R=game:GetService("RunService")local W=game:GetService("Workspace")local U=game:GetService("UserInputService")local C=W.CurrentCamera local L=P.LocalPlayer local CF={E=false,F=100,S=0.5,M=5000,T=false,WC=false,A="Head",PE=false,PF=0.12,OY=0,FOY=0,LT=false,SK=Enum.KeyCode.E,FC=Color3.fromRGB(255,255,255)}local LT=nil local LTC=0 local TCI=0.1 local VC={}local function GC(p)return p and p.Character end local function GCP(p,pn)if not pn then return nil end local c=GC(p)return c and c:FindFirstChild(pn)end local function GH(p)local c=GC(p)return c and(c:FindFirstChild("Humanoid")or c:FindFirstChildOfClass("Humanoid"))end local function GH2()return GCP(L,"HumanoidRootPart")end local function GTP(p)local tp=GCP(p,CF.A)if not tp and(CF.A=="UpperTorso"or CF.A=="LowerTorso")then tp=GCP(p,"Torso")end return tp end local function GSP(pos)local sp,os=C:WorldToScreenPoint(pos)return Vector2.new(sp.X,sp.Y),os,sp.Z end local function GSC()return Vector2.new(C.ViewportSize.X/2.0,C.ViewportSize.Y/2.0+CF.FOY)end local function GAD(pos)local cp=C.CFrame.Position local cl=C.CFrame.LookVector local tt=(pos-cp).Unit local dot=cl:Dot(tt)dot=math.clamp(dot,-1,1)local ang=math.acos(dot)local ad=math.deg(ang)return ad end local function GFA()local vs=C.ViewportSize local hf=math.rad(C.FieldOfView/2)local ppd=(vs.Y/2)/math.deg(hf)return CF.F/ppd end local function IVT(p)if not CF.WC then return true end local tp=GTP(p)if not tp then return false end local o=C.CFrame.Position local tpos=tp.Position local d=tpos-o local dist=d.Magnitude if dist<1 then return true end local rp=RaycastParams.new()rp.FilterType=Enum.RaycastFilterType.Exclude rp.FilterDescendantsInstances={GC(L),GC(p)}rp.IgnoreWater=true local res=W:Raycast(o,d.Unit*(dist-1),rp)return res==nil end local function IVT2(p,skf)if not p or p==L then return false end local c=GC(p)if not c then return false end if not c:IsDescendantOf(W)then return false end local h=GCP(p,"HumanoidRootPart")if not h then return false end local hm=GH(p)if not hm or hm.Health<=0 then return false end if CF.T then if p.Team and L.Team and p.Team==L.Team then return false end end local lh=GH2()if not lh then return false end local tp=GTP(p)if not tp then return false end local wd=(tp.Position-lh.Position).Magnitude if wd>CF.M then return false end if not skf then local ad=GAD(tp.Position)local fa=GFA()if ad>fa then return false end end if CF.WC and not IVT(p)then return false end return true end local function CV(p,cpos)local ca=VC[p]local n=tick()if not ca then VC[p]={P=cpos,T=n,V=Vector3.zero}return Vector3.zero end local dt=n-ca.T if dt<0.016 then return ca.V end local v=(cpos-ca.P)/dt VC[p]={P=cpos,T=n,V=v}return v end local function PP(p,tp)if not CF.PE then return tp.Position end if not tp then return tp.Position end local cp=tp.Position local v=CV(p,cp)return cp+v*CF.PF end local function GCT()local bt=nil local bd=math.huge for _,p in ipairs(P:GetPlayers())do if IVT2(p,false)then local tp=GTP(p)if tp then local ad=GAD(tp.Position)if ad<bd then bt=p bd=ad end end end end return bt end local function SST()if not CF.LT then return true end if not LT then return true end if not IVT2(LT,true)then return true end local tp=GTP(LT)if tp then local ad=GAD(tp.Position)local fa=GFA()if ad>fa*2 then return true end end return false end local function GNT()local vt={}for _,p in ipairs(P:GetPlayers())do if IVT2(p,false)then local tp=GTP(p)if tp then table.insert(vt,{p=p,d=GAD(tp.Position)})end end end table.sort(vt,function(a,b)return a.d<b.d end)local ci=0 for i,da in ipairs(vt)do if da.p==LT then ci=i break end end if ci>0 and ci<#vt then return vt[ci+1].p elseif #vt>0 then return vt[1].p end return nil end local function AAP(tpos)if not tpos then return end local ccf=C.CFrame local tcf=CFrame.new(ccf.Position,tpos)C.CFrame=ccf:Lerp(tcf,CF.S)end local fc=Drawing.new("Circle")fc.Thickness=1 fc.NumSides=100 fc.Radius=CF.F fc.Filled=false fc.Visible=false fc.ZIndex=999 fc.Color=Color3.fromRGB(255,255,255)P.PlayerRemoving:Connect(function(p)VC[p]=nil if LT==p then LT=nil end end)R.RenderStepped:Connect(function()if not CF.E then return end local n=tick()local t if CF.LT then if n-LTC>TCI then LTC=n if SST()then LT=GCT()end end t=LT else t=GCT()end if t then local tp=GTP(t)if tp then local pp=PP(t,tp)pp=pp+Vector3.new(0,CF.OY,0)AAP(pp)end end end)R.RenderStepped:Connect(function()local c=GSC()fc.Position=c fc.Visible=CF.E fc.Radius=CF.F fc.Color=CF.FC end)U.InputBegan:Connect(function(i,gp)if gp then return end if i.KeyCode==CF.SK and CF.E and CF.LT then LT=GNT()end end)local AA={}function AA:UC(nc)for k,v in pairs(nc)do if CF[k]~=nil then CF[k]=v end end end function AA:GC()return CF end function AA:T(s)CF.E=s if not s then LT=nil end end function AA:D()fc:Remove()VC={}LT=nil end return AA
